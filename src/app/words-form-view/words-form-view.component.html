<div *ngIf="room$ | async as room"
     class="u-fontFamily-CircularStd-Black u-height-100">
    <ng-container *ngIf="!room.loading && (wordsState | async)?.isLoaded">
        <ng-container *ngIf="player$ | async as player">
            <div *ngIf="!player.loading"
                 fxLayout="column"
                 fxFlex="100%"
                 [ngStyle]="{ 'padding': '20px 20px 30px 20px' }">
                <div fxLayout="row"
                     fxFlex="none">
                    <div fxFlex="0 0 33%"
                         fxLayout="row"
                         fxLayoutAlign="start center">
                        <a href="javascript: void(0)"
                           (click)="goBack(room.code)"
                           mat-icon-button
                           class="color-black">
                            <i class="material-icons"
                               style="font-size: 40px;">
                                chevron_left
                            </i>
                        </a>
                    </div>
                    <div fxFlex="0 0 33%">
                        <app-room-code class="u-display-block"
                                       [roomCode]="room.code">
                        </app-room-code>
                    </div>
                    <div fxFlex="0 0 33%"></div>
                </div>
                <div fxFlex="0 0 calc(100% - 111px)"
                     [ngStyle]="{ 'max-width': '550px' }">
                    <div [ngStyle]="{ 'margin': '20px 0' }">
                        <div class="inputLabel">
                            Enter a word or phrase
                        </div>
                        <div *ngFor="let empty of EMPTY_WORDS_ARRAY; let index = index"
                             class="u-width-100">
                            <form novalidate
                                  (ngSubmit)="onSubmit(getFormControl(index).value, index)">
                                <mat-form-field [appearance]="formFieldAppearances[index]"
                                                [ngStyle]="{ 'width': '100%', 'font-family': 'CircularStd-Black' }"
                                                [color]="'accent'">
                                    <mat-label>{{ index + 1}}</mat-label>
                                    <input matInput
                                           (focus)="setFormFieldAppearance(index, 'fill')"
                                           (blur)="setFormFieldAppearance(index, 'outline')"
                                           [formControl]="getFormControl(index)"
                                           [ngClass]="{ 'inputExists': getFormControl(index).value, 'inputEmpty': !getFormControl(index).value }"
                                           [ngStyle]="('fill' === formFieldAppearances[index]) ? { 'text-align': 'center' } : { 'text-align': 'left' }"
                                           [ngStyle.gt-sm]="('fill' === formFieldAppearances[index]) ? { 'text-align': 'center' } : { 'text-align': 'left' }"
                                           type="text"
                                           [placeholder]="('fill' === formFieldAppearances[index]) ? ('ex: ' + inputPlaceholder) : ''"
                                           autocomplete="off">
                                </mat-form-field>
                            </form>
                        </div>
                    </div>
                    <ng-container *ngIf="!hasEnoughWords()">
                        <div fxLayout="row"
                             fxLayoutAlign="center center">
                            <button mat-raised-button
                                    fxFlex="none"
                                    type="button"
                                    color="accent"
                                    class="c-btn"
                                    (click)="fillInTheBlanks(GLOBAL_WORD_BANK)">
                                Fill in the blanks
                            </button>
                        </div>
                    </ng-container>
                </div>
                <div *ngIf="room.started"
                     class="u-textAlign-Center">
                    Chill out, a game is currently in progress.
                </div>
                <div *ngIf="!room.started">
                    <button mat-raised-button
                            color="accent"
                            class="c-btn u-width-100"
                            (click)="submitWordList(room, player)"
                            [ngClass]="{ 'c-btn-bottom-border--light-black': hasEnoughWords(), 'c-btn--grey c-btn--word--disabled': !hasEnoughWords() }">
                        {{ 3 <= autoFilledWords.length ? 'Yep, I\'m lazy AF' : 'Yep, got five words' }}
                    </button>
                </div>
            </div>
            <div *ngIf="player.loading">
                <app-loading-view></app-loading-view>
            </div>
        </ng-container>
    </ng-container>
    <div *ngIf="room.loading && !(wordsState | async)?.isLoaded">
        <app-loading-view></app-loading-view>
    </div>
</div>
