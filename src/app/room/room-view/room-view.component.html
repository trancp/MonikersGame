<ng-container *ngIf="roomState | async as room">
    <ng-container *ngIf="!isLoading">
        <div [ngStyle]="{ 'padding': '20px 20px 30px 20px' }"
             class="u-fontFamily-CircularStd-Black u-height-100"
             fxLayout="column">
            <div fxLayout="row"
                 fxFlex="none">
                <div fxFlex="33%">
                    <a (click)="showRules()"
                       [ngStyle]="{ 'cursor': 'pointer' }"
                       class="u-textTransform-uppercase u-fontFamily-GoodDog u-fontSize-20">
                        Rules
                    </a>
                </div>
                <div fxFlex="33%">
                    <app-room-code class="u-display-block"
                                   [roomCode]="room.code">
                    </app-room-code>
                </div>
                <div fxFlex="33%"></div>
            </div>
            <div fxFlex="100%"
                 [ngStyle]="{ 'margin': '20px 0' }">
                <div fxLayout="row"
                     style="overflow: auto; height: 280px; box-shadow: inset 0 -10px 15px -5px #e6e6e6;">
                    <div *ngFor="let team of (room.players | appSortByTeams); let index = index"
                         fxFlex="50%">
                        <app-players-list [players]="team.players"
                                          (onDragStart)="dragStart($event)"
                                          [dataToTransfer]="dataToTransfer"
                                          [user]="playerState | async"
                                          (switchPlayerToNewTeam)="switchPlayerToNewTeam($event, room)"
                                          [teamName]="team.teamName"
                                          [teamId]="index + 1"
                                          [alignment]="team.listAlignment">
                        </app-players-list>
                    </div>
                </div>
                <div *ngIf="playerState | async as user"
                     [ngStyle]="{ 'margin': '20px 0' }">
                    <button mat-raised-button
                            color="primary"
                            class="c-btn u-width-100"
                            (click)="switchTeams(user)">
                        Switch Teams
                    </button>
                </div>
            </div>
            <div fxFlex="none">
                <ng-container *ngIf="playerState | async as user">
                    <ng-container *ngIf="user.vip && !playerIsLoading">
                        <div class="color-grey u-textAlign-Center"
                             [ngClass]="{ 'color-black': roomIsReadyToStart(room), 'color-grey': !roomIsReadyToStart(room) }"
                             style="margin-bottom: 10px;">
                            press
                        </div>
                        <div [ngStyle]="{ 'margin-bottom': '10px' }">
                            <button mat-raised-button
                                    color="accent"
                                    class="c-btn u-width-100"
                                    (click)="goToGame(room, user)"
                                    [ngClass]="{ 'c-btn-bottom-border--light-black': roomIsReadyToStart(room), 'c-btn--grey c-btn--game--disabled': !roomIsReadyToStart(room) }">
                                Everybody's in
                            </button>
                        </div>
                        <div class="color-grey u-textAlign-Center"
                             [ngClass]="{ 'color-black': roomIsReadyToStart(room), 'color-grey': !roomIsReadyToStart(room) }"
                             style="margin-bottom: 10px;">
                            to start the game.
                        </div>
                    </ng-container>
                    <ng-container *ngIf="!user.vip && !playerIsLoading">
                        <div class="u-textAlign-Center u-fontFamily-CircularStd-Black u-fontSize-20"
                             [ngStyle]="{ 'margin': '20px 0' }">
                            Sit back, and fucking chill.
                        </div>
                    </ng-container>
                </ng-container>
            </div>
        </div>
    </ng-container>
    <ng-container *ngIf="isLoading">
        <app-loading-view></app-loading-view>
    </ng-container>
</ng-container>

